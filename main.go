package main

import (
	"fmt"
	"github.com/mecsred/AlphaNumCrypto/ciphers"
	lang "github.com/mecsred/AlphaNumCrypto/language"
)

var testCipher string = "The Creature's narrativeIntelligent and articulate, the Creature relates his first days of life, living alone in the wilderness. He found that people were afraid of and hated him due to his appearance, which led him to fear and hide from them. While living in an abandoned structure connected to a cottage, he grew fond of the poor family living there and discreetly collected firewood for them, cleared snow away from their path, and performed other tasks to help them. Secretly living next to the cottage for months, the Creature learned to speak by listening to them and taught himself to read after discovering a lost satchel of books in the woods. When he saw his reflection in a pool, he realized his appearance was hideous, and it horrified him as much as it horrified normal humans. As he continued to learn of the family's plight, he grew increasingly attached to them, and eventually he approached the family in hopes of becoming their friend, entering the house while only the blind father was present. The two conversed, but on the return of the others, the rest of them were frightened. The blind man's son attacked him and the Creature fled the house. The next day, the family left their home out of fear that he would return. The Creature was enraged by the way he was treated and gave up hope of ever being accepted by humans. Although he hated his creator for abandoning him, he decided to travel to Geneva to find him because he believed that Victor was the only person with a responsibility to help him. On the journey, he rescued a child who had fallen into a river, but her father, believing that the Creature intended to harm them, shot him in the shoulder. The Creature then swore revenge against all humans. He travelled to Geneva using details from Victor's journal, murdered William, and framed Justine for the crime.The Creature demands that Victor create a female companion like himself. He argues that as a living being, he has a right to happiness. The Creature promises that he and his mate will vanish into the South American wilderness, never to reappear, if Victor grants his request. Should Victor refuse, the Creature threatens to kill Victor's remaining friends and loved ones and not stop until he completely ruins him. Fearing for his family, Victor reluctantly agrees. The Creature says he will watch over Victor's progress.Victor Frankenstein's narrative resumes Clerval accompanies Victor to England, but they separate, at Victor's insistence, at Perth, Scotland. Victor suspects that the Creature is following him. Working on the female creature on the Orkney Islands, he is plagued by premonitions of disaster. He fears that the female will hate the Creature or become more evil than he is. Even more worrying to him is the idea that creating the second creature might lead to the breeding of a race that could plague mankind. He tears apart the unfinished female creature after he sees the Creature, who had indeed followed Victor, watching through a window. The Creature immediately bursts through the door to confront Victor and tries to threaten him into working again, but Victor is convinced that since the Creature is evil, his mate would be evil as well, and that the pair would threaten all of humanity by giving rise to a new race just like them. The Creature leaves, but gives a final threat: I will be with you on your wedding night. Victor interprets this as a threat upon his life, believing that the Creature will kill him after he finally becomes happy. Victor sails out to sea to dispose of his instruments, falls asleep in the boat, is unable to return to shore because of changes in the winds, and ends up being blown to the Irish coast. When Victor lands in Ireland, he is arrested for Clerval's murder, as the Creature had strangled Clerval and left the corpse to be found where his creator had arrived. Victor suffers another mental breakdown and wakes to find himself in prison. However, he is shown to be innocent, and after being released, he returns home with his father, who has restored to Elizabeth some of her father's fortune.In Geneva, Victor is about to marry Elizabeth and prepares to fight the Creature to the death, arming himself with pistols and a dagger. The night following their wedding, Victor asks Elizabeth to stay in her room while he looks for the fiend. While Victor searches the house and grounds, the Creature strangles Elizabeth. From the window, Victor sees the Creature, who tauntingly points at Elizabeth's corpse; Victor tries to shoot him, but the Creature escapes. Victor's father, weakened by age and by the death of Elizabeth, dies a few days later. Seeking revenge, Victor pursues the Creature through Europe, then north into Russia, with his adversary staying ahead of him every step of the way. Eventually, the chase leads to the Arctic Ocean and then on towards the North Pole, and Victor reaches a point where he is within a mile of the Creature, but he collapses from exhaustion and hypothermia before he can find his quarry, allowing the Creature to escape. Eventually the ice around Victor's sledge breaks apart, and the resultant ice floe comes within range of Walton's ship.Captain Walton's conclusion At the end of Victor's narrative, Captain Walton resumes telling the story. A few days after the Creature vanishes, the ship becomes trapped in pack ice, and several crewmen die in the cold before the rest of Walton's crew insists on returning south once it is freed. Upon hearing the crew's demands, Victor is angered and, despite his condition, gives a powerful speech to them. He reminds them of why they chose to join the expedition and that it is hardship and danger, not comfort, that defines a glorious undertaking such as theirs. He urges them to be men, not cowards. However, although the speech makes an impression on the crew, it is not enough to change their minds and when the ship is freed, Walton regretfully decides to return South. Victor, even though he is in a very weak condition, states that he will go on by himself. He is adamant that the Creature must die. Victor dies shortly thereafter, telling Walton, in his last words, to seek happiness in tranquility and avoid ambition. Walton discovers the Creature on his ship, mourning over Victor's body. The Creature tells Walton that Victor's death has not brought him peace; rather, his crimes have made him even more miserable than Victor ever was. The Creature vows to kill himself so that no one else will ever know of his existence and Walton watches as the Creature drifts away on an ice raft, never to be seen again."
var testKey []int = ciphers.RunesToKey(&lang.BSE, []rune("godImgladfactorioisover"))

func main() {
	//for i := 0; i < lang.BSE.KeyModulus(); i += 1 {
		fmt.Printf("\nEncrypting with key (%v)\n ", testKey)
		ctex := ciphers.VigEncrypt(&lang.BSE, []rune(testCipher), testKey)
		key := ciphers.VigKeyfindSearch(&lang.BSE, ctex, 3)
		/*fmt.Printf("Filtered:-------------------------------------------\n")
		fmt.Printf(string(lang.BSE.FilterAlphabetic([]rune(testCipher))))
		fmt.Printf("\n")
		fmt.Printf("Un-Filtered:-------------------------------------------\n")
		fmt.Printf(string(lang.BSE.FormatAlphabetic(lang.BSE.FilterAlphabetic([]rune(testCipher)), []rune(testCipher))))
		fmt.Printf("\n")*/
		fmt.Printf("Ctext:-------------------------------------------\n")
		fmt.Printf(string(ctex))
		fmt.Printf("\n")
		fmt.Printf("Top Key Decryption:-------------------------------------------\n")
		fmt.Printf(string(ciphers.VigDecrypt(&lang.BSE, ctex, key)))
		fmt.Printf("\n")
		fmt.Printf("Actual Decryption:-------------------------------------------\n")
		fmt.Printf(string(ciphers.VigDecrypt(&lang.BSE, ctex, testKey)))
		fmt.Printf("\n")
		fmt.Printf("Key identified as (%v)\n", key)
	//}
	return
}
